#include "automat.h"

/****************************************************************
*****************************************************************/
void calcul(void)
{
	int x, y, nb_voisins;
	for (y = 1; y<TY - 1; y++){
		for (x = 1; x<TX - 1; x++){
			nb_voisins = compte_voisins(y, x);
			if (nb_voisins <2 || nb_voisins>3)
				SAV[y][x] = 0;
			else
				SAV[y][x] = 1;
		}
	}
}
/****************************************************************
*****************************************************************/
int compte_voisins(int y, int x)
{
	int nb = 0;                 

	if (MAT[y][x + 1] == 1)   
		nb++;                
	if (MAT[y - 1][x + 1] == 1)  
		nb++;                
	if (MAT[y - 1][x] == 1)    
		nb++;
	if (MAT[y - 1][x - 1] == 1)
		nb++;
	if (MAT[y][x - 1] == 1)
		nb++;
	if (MAT[y + 1][x - 1] == 1)
		nb++;
	if (MAT[y + 1][x] == 1)
		nb++;
	if (MAT[y + 1][x + 1] == 1)
		nb++;

	return nb;             
}
/****************************************************************
*****************************************************************/
void copie(void)
{
	memcpy(MAT, SAV, sizeof(int)*TX*TY);
}
/****************************************************************
*****************************************************************/